(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,s=window.wc.wcSettings,n=window.wp.data,{useEffect:a}=window.wp.element,o=(0,s.getSetting)("superpayments_data",{}),r="Something went wrong. No money has been taken from your account. Please refresh the page and try again.",c=t=>{const{eventRegistration:s,emitResponse:n}=t,{onPaymentSetup:c,onCheckoutFail:u}=s,i={paymentMethodData:{super_payments_checkout_session_token:o.checkoutSessionToken}};return a((()=>{const e=c((async()=>{const e=await window.superCheckout.submit();return"SUCCESS"===e.status?{meta:i,type:n.responseTypes.SUCCESS}:"FAILURE"===e.status?{message:null!==(t=e.errorMessage)&&void 0!==t?t:r,meta:i,type:n.responseTypes.ERROR}:void 0;var t})),t=u((({processingResponse:{paymentDetails:e}})=>{var t;return{type:"failure",message:null!==(t=e.errorMessage)&&void 0!==t?t:r,messageContext:n.noticeContexts.PAYMENTS,meta:i}}));return()=>{e(),t()}}),[n.responseTypes.ERROR,n.responseTypes.SUCCESS,c]),(0,e.createElement)("super-checkout",{"checkout-session-token":o.checkoutSessionToken,amount:t.billing.cartTotal.value})},u={name:"superpayments",label:(0,e.createElement)((()=>{const{CART_STORE_KEY:t}=wc.wcBlocksData,s=(0,n.select)(t).getCartTotals();return(0,e.createElement)("super-payment-method-title",{cartAmount:s.total_price})}),null),content:(0,e.createElement)(c,null),edit:(0,e.createElement)(c,null),canMakePayment:()=>!0,ariaLabel:"Super Payments",supports:{features:o.supports}};(0,t.registerPaymentMethod)(u)})();